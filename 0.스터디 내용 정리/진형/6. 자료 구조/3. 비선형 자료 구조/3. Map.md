# 🗺️ **Java Map 완벽 정리**

---

## 📚 개요

Java의 **Map**은 키(Key)와 값(Value)의 쌍으로 데이터를 저장하는 자료구조입니다.  
각 키는 유일해야 하며(key 중복 불가), 값은 중복이 가능합니다.  
즉, 하나의 키는 하나의 값에만 매핑됩니다.

- **Key-Value 구조**: 데이터를 키와 값의 쌍으로 저장  
- **중복 허용 규칙**:  
  - Key: 중복 불가 (중복 시 기존 값이 덮어쓰기 됨)  
  - Value: 중복 가능

---

## 🧩 Map의 주요 특징

- **키 기반 탐색**: 키를 통해 값을 빠르게 검색할 수 있음  
- **순서 보장 여부**: 구현체에 따라 다름  
  - `HashMap`: 순서 보장 안 함  
  - `LinkedHashMap`: 입력 순서 유지  
  - `TreeMap`: 키의 정렬 순서 유지  
- **Null 허용 여부**:  
  - `HashMap`: key 하나, value 여러 개 null 허용  
  - `Hashtable`: null 허용 안 함  
  - `TreeMap`: key가 null이면 `NullPointerException` 발생 (정렬 필요)

---

## ⚙️ 주요 메서드

| 메서드           | 설명                                  |
|------------------|-------------------------------------|
| `put(K key, V value)`    | 키와 값을 저장하거나 기존 키의 값을 수정 |
| `get(Object key)`        | 키에 해당하는 값을 반환 (없으면 null)    |
| `remove(Object key)`     | 키에 해당하는 키-값 쌍을 삭제             |
| `containsKey(Object key)`| 특정 키가 존재하는지 확인                 |
| `containsValue(Object value)` | 특정 값이 존재하는지 확인               |
| `size()`                | 저장된 키-값 쌍의 개수 반환               |
| `clear()`               | 모든 키-값 쌍 삭제                        |

---

## 💡 Map 인터페이스와 주요 구현체

| 구현체           | 순서 보장       | Null 허용         | 동기화         | 특징                                  |
|------------------|----------------|-------------------|----------------|-------------------------------------|
| `HashMap`        | X              | key 1개, value 다수 허용 | X              | 가장 많이 사용, 해시 기반 빠른 검색    |
| `LinkedHashMap`  | O (입력 순서)  | key 1개, value 다수 허용 | X              | 입력한 순서 또는 접근 순서 유지 가능   |
| `TreeMap`        | O (키 정렬 순서) | key null 불가, value null 가능 | X          | 키를 기준으로 정렬된 상태 유지          |
| `Hashtable`      | X              | null 허용 안 함    | O (동기화)     | 구버전, 동기화 필요 시 사용             |

---

## 🧮 HashMap 예제

```java
import java.util.HashMap;

public class HashMapExample {
    public static void main(String[] args) {
        HashMap<String, Integer> map = new HashMap<>();

        // 데이터 추가
        map.put("apple", 3);
        map.put("banana", 2);
        map.put("orange", 5);

        // 값 가져오기
        System.out.println("apple의 값: " + map.get("apple")); // 3

        // 값 수정
        map.put("apple", 10);

        // 키 존재 여부 확인
        if(map.containsKey("banana")) {
            System.out.println("banana는 존재합니다.");
        }

        // 삭제
        map.remove("orange");

        System.out.println("크기: " + map.size()); // 2
    }
}
```

---

## 🌳 TreeMap 예제

```java
import java.util.TreeMap;

public class TreeMapExample {
    public static void main(String[] args) {
        TreeMap<String, Integer> treeMap = new TreeMap<>();

        treeMap.put("banana", 2);
        treeMap.put("apple", 3);
        treeMap.put("orange", 5);

        // 키가 정렬된 순서로 출력됨
        for(String key : treeMap.keySet()) {
            System.out.println(key + " : " + treeMap.get(key));
        }
    }
}
```

---

## 🧠 내부 동작 원리

- **해시함수(Hash Function)**  
  키의 `hashCode()` 값을 기반으로 저장 위치를 계산합니다.

- **버킷(Bucket)**  
  해시값에 따라 데이터를 저장하는 공간입니다.  
  여러 키가 같은 버킷에 저장될 수 있습니다.

- **충돌 처리 방식 (체이닝)**  
  같은 버킷에 여러 엔트리가 존재할 경우 링크드 리스트(또는 트리 구조)로 연결하여 저장합니다.

---

## ⚠️ 주의사항

- **동기화(Thread-safe)**  
  - `HashMap`, `TreeMap`, `LinkedHashMap`은 기본적으로 동기화 되어 있지 않음  
  - 멀티스레드 환경에서는 `ConcurrentHashMap` 또는 `Collections.synchronizedMap()` 사용 권장  
- **순서 보장 차이**  
  - `HashMap`은 순서 보장 안 함  
  - `LinkedHashMap`은 입력 순서 보장  
  - `TreeMap`은 키 정렬 순서 보장  
- **Key의 `hashCode()`와 `equals()` 중요성**  
  - Map의 키로 사용되는 객체는 반드시 `hashCode()`와 `equals()` 메서드를 올바르게 오버라이드 해야 함  
  - 그렇지 않으면 의도치 않은 중복 저장이나 검색 실패가 발생할 수 있음

---

## 🧾 Map 순회 방법

### 1. `entrySet()` 사용 (키와 값을 함께 순회)

```java
for (Map.Entry<String, Integer> entry : map.entrySet()) {
    System.out.println(entry.getKey() + " : " + entry.getValue());
}
```

### 2. `keySet()` 사용 (키만 순회 후 값 조회)

```java
for (String key : map.keySet()) {
    System.out.println(key + " : " + map.get(key));
}
```

### 3. `values()` 사용 (값만 순회)

```java
for (Integer value : map.values()) {
    System.out.println(value);
}
```

---

## 📌 정리

Java Map은 키-값 쌍으로 데이터를 효율적으로 저장하고 검색하는 자료구조이며, 구현체에 따라 순서 보장 및 성능 특성이 다르므로 상황에 맞게 선택하여 사용해야 합니다.
